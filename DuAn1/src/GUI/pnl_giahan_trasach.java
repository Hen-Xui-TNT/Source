/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package GUI;

import BLL.BLL_PhieuThue;
import BLL.BLL_TraSach;
import BLL.BLL_main;
import static GUI.pnl_CT_TraSach.cbbNhanVien_PP;
import static GUI.pnl_CT_TraSach.txtTongTien;
import static GUI.pnl_CT_TraSach.txtTongTien_Giahan;
import static GUI.pnl_CT_TraSach.txtTongTien_Phat;
import static GUI.pnl_PhieuThue.cbbNhanVien;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Yuuki
 */
public class pnl_giahan_trasach extends javax.swing.JPanel {

    /**
     * Creates new form pnl_giahan_trasach
     */
    public pnl_giahan_trasach() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        PnlThongTinTacGia = new javax.swing.JPanel();
        jScrollPane12 = new javax.swing.JScrollPane();
        tblPhieuThue_GHTS = new javax.swing.JTable();
        lblUser4 = new javax.swing.JLabel();
        txtTimKiem_GH = new javax.swing.JTextField();

        PnlThongTinTacGia.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 51, 0)), "", javax.swing.border.TitledBorder.LEFT, javax.swing.border.TitledBorder.TOP));

        tblPhieuThue_GHTS.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "STT", "Mã Phiếu Thuê", "Số Phiếu Thuê", "Độc Giả", "Nhân Viên", "Ngày Thuê", "Ngày Trả", "Tổng Tiền", "Ghi Chú"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tblPhieuThue_GHTS.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblPhieuThue_GHTSMouseClicked(evt);
            }
        });
        jScrollPane12.setViewportView(tblPhieuThue_GHTS);
        if (tblPhieuThue_GHTS.getColumnModel().getColumnCount() > 0) {
            tblPhieuThue_GHTS.getColumnModel().getColumn(0).setMaxWidth(50);
        }

        lblUser4.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        lblUser4.setText("Tìm kiếm :");

        txtTimKiem_GH.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtTimKiem_GHKeyReleased(evt);
            }
        });

        javax.swing.GroupLayout PnlThongTinTacGiaLayout = new javax.swing.GroupLayout(PnlThongTinTacGia);
        PnlThongTinTacGia.setLayout(PnlThongTinTacGiaLayout);
        PnlThongTinTacGiaLayout.setHorizontalGroup(
            PnlThongTinTacGiaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(PnlThongTinTacGiaLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(PnlThongTinTacGiaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane12)
                    .addGroup(PnlThongTinTacGiaLayout.createSequentialGroup()
                        .addComponent(lblUser4, javax.swing.GroupLayout.PREFERRED_SIZE, 89, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(txtTimKiem_GH, javax.swing.GroupLayout.PREFERRED_SIZE, 547, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 613, Short.MAX_VALUE)))
                .addContainerGap())
        );
        PnlThongTinTacGiaLayout.setVerticalGroup(
            PnlThongTinTacGiaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PnlThongTinTacGiaLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(PnlThongTinTacGiaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblUser4, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtTimKiem_GH, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane12, javax.swing.GroupLayout.DEFAULT_SIZE, 448, Short.MAX_VALUE)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(PnlThongTinTacGia, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(PnlThongTinTacGia, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void tblPhieuThue_GHTSMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblPhieuThue_GHTSMouseClicked
        // TODO add your handling code here:
 if(evt.getClickCount()==2){
         int row = tblPhieuThue_GHTS.getSelectedRow();  
       String SoPhieuThue = tblPhieuThue_GHTS.getValueAt(row, 2).toString();  
      pnl_CT_TraSach pnl = new pnl_CT_TraSach();
      BLL_main.themtab("Chi tiết phiếu thuê", frm_main.tbn_main, pnl);
    
       DefaultTableModel table1 = (DefaultTableModel)DuAn1.frm_TraSach.tblCTPT.getModel(); 
       BLL_TraSach.ThongTin_ChiTietPhieuThue(table1, SoPhieuThue);
    
       txtTongTien.setText(BLL.ChuyenDoi_ThongBao.TienVietNam(0));
       txtTongTien_Giahan.setText(BLL.ChuyenDoi_ThongBao.TienVietNam(0));
       txtTongTien_Phat.setText(BLL.ChuyenDoi_ThongBao.TienVietNam(0));
      
       
        BLL_PhieuThue.FillDataToCBB_NhanVien(cbbNhanVien_PP);
 }

    }//GEN-LAST:event_tblPhieuThue_GHTSMouseClicked

    private void txtTimKiem_GHKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtTimKiem_GHKeyReleased
        // TODO add your handling code here:
        
         String seach = txtTimKiem_GH.getText();
        DefaultTableModel table = (DefaultTableModel) tblPhieuThue_GHTS.getModel();
        BLL.BLL_PhieuThue.ThongTinPhieuThue(table, seach); 

    }//GEN-LAST:event_txtTimKiem_GHKeyReleased


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel PnlThongTinTacGia;
    private javax.swing.JScrollPane jScrollPane12;
    private javax.swing.JLabel lblUser4;
    static javax.swing.JTable tblPhieuThue_GHTS;
    public static javax.swing.JTextField txtTimKiem_GH;
    // End of variables declaration//GEN-END:variables
}
